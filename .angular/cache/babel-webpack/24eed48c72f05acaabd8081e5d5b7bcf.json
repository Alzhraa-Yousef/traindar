{"ast":null,"code":"import { Location } from '../shared/train';\nimport Swal from 'sweetalert2';\nimport 'sweetalert2/src/sweetalert2.scss';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../servises/train.service\";\nimport * as i3 from \"../headerafter/headerafter.component\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"../footerafter/footerafter.component\";\n\nfunction CitytrainIDComponent_option_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 16);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const StationName_r3 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(StationName_r3);\n  }\n}\n\nfunction CitytrainIDComponent_option_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 16);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const StationName_r4 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(StationName_r4);\n  }\n}\n\nfunction CitytrainIDComponent_p_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 17);\n    i0.ɵɵtext(1, \"Please select name of city\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport let CitytrainIDComponent = /*#__PURE__*/(() => {\n  class CitytrainIDComponent {\n    constructor(elementRef, router, trainInformation) {\n      this.elementRef = elementRef;\n      this.router = router;\n      this.trainInformation = trainInformation;\n      this.CityList = ['10 Ramadan', '23 Yuliu', 'Alexandria', 'Asyut']; //TrainIDTimeList2=[{ID:110,Time:2},{ID:120,Time:0.5},{ID:130,Time:4},{ID:140,Time:8}]\n      // TrainIDTimeList:Train[]| any=[\n      //   new Train(110,'2'),\n      //   new Train(120,'0.5'),\n      //   new Train(130,'1'),\n      //   new Train(140,'4'),\n      //   new Train(150,'8')\n      // ]\n\n      this.trainLocation = new Location(27.180134, 31.189283);\n    }\n\n    ngOnInit() {\n      this.session = localStorage.getItem('UserID');\n\n      if (this.session == '') {\n        this.router.navigate(['loginform']);\n      }\n\n      this.trainInformation.GetCityNamesList().subscribe(response => {\n        this.StationList = response;\n      }, error => {\n        console.log(error); //this.errorMessageID = error;\n        // Swal.fire({\n        //  title: 'Error',\n        //  html: \"Are you sure you want to send the points ?\",\n        //  iconHtml: '<img src=\"../../assets/error.png\">',\n        //  background:'#DFD1A2',\n        //  showCancelButton: true,\n        //  confirmButtonColor: '#F6BC00',\n        //  cancelButtonColor: '#F6BC00',\n        //  cancelButtonText:'No',\n        //  confirmButtonText: 'Yes',\n        //  width:400, })\n      });\n    }\n\n    GetTraininformation() {\n      var selectedNameMenu = this.elementRef.nativeElement.querySelector('#CityNameMenu');\n      var selectedName = selectedNameMenu.options[selectedNameMenu.selectedIndex].text;\n      var selectedName2Menu = this.elementRef.nativeElement.querySelector('#CityName2Menu');\n      var selectedName2 = selectedName2Menu.options[selectedName2Menu.selectedIndex].text;\n\n      if (selectedName == \"Your City:\" || selectedName2 == \"Your Destination:\") {\n        console.log(\"no\");\n        this.selectFlag = true;\n      } else {\n        this.trainInformation.GetTrianIDTimeList(selectedName, selectedName2, this.session).subscribe(response => {\n          this.TrainIDTimeList = response;\n          console.log(this.TrainIDTimeList);\n          console.log(this.TrainIDTimeList.length);\n          this.Length = this.TrainIDTimeList.length;\n          console.log(this.Length);\n        }, error => {\n          console.log(error);\n          this.errorMessageID = error;\n          Swal.fire({\n            title: 'Error',\n            html: this.errorMessageID,\n            iconHtml: '<img src=\"../../assets/error.png\">',\n            background: '#DFD1A2',\n            showCancelButton: true,\n            confirmButtonColor: '#F6BC00',\n            cancelButtonColor: '#F6BC00',\n            cancelButtonText: 'No',\n            confirmButtonText: 'Yes',\n            width: 400\n          });\n          this.router.navigate(['homeafter']);\n        }, () => {\n          this.selectFlag = false;\n          const element = document.getElementById('row3');\n          element.innerHTML = '';\n          const e2 = document.getElementById('row4');\n          e2.innerHTML = '';\n          const e3 = document.getElementById('map');\n          e3.innerHTML = '';\n\n          if (this.TrainIDTimeList.length < 1) {\n            Swal.fire({\n              title: 'Error',\n              html: \"There is no available Trains for selected cities\",\n              iconHtml: '<img src=\"../../assets/error.png\">',\n              // background:'#DFD1A2',\n              //showCancelButton: true,\n              confirmButtonColor: '#F6BC00',\n              cancelButtonColor: '#F6BC00',\n              //cancelButtonText:'No',\n              confirmButtonText: 'OK',\n              width: 400\n            });\n          } else {\n            const table = document.createElement('table');\n            table.style.borderCollapse = 'separate';\n            table.style.borderSpacing = '6px';\n            const TRtitle = document.createElement('tr');\n            const tdtitle1 = document.createElement('td');\n            const tdtitle2 = document.createElement('td');\n            tdtitle1.style.border = '1px solid black';\n            tdtitle2.style.border = '1px solid black';\n            tdtitle1.style.background = '#DFD1A2';\n            tdtitle2.style.background = '#DFD1A2';\n            tdtitle1.style.width = '150px';\n            tdtitle2.style.width = '150px';\n            tdtitle1.style.textAlign = 'center';\n            tdtitle2.style.textAlign = 'center';\n            tdtitle1.style.borderTopLeftRadius = '30px';\n            tdtitle2.style.borderTopRightRadius = '30px';\n            const tdtitleTEXT1 = document.createTextNode('Train ID');\n            const tdtitleTEXT2 = document.createTextNode('Remaining Time(hr)');\n            tdtitle1.appendChild(tdtitleTEXT1);\n            tdtitle2.appendChild(tdtitleTEXT2);\n            TRtitle.appendChild(tdtitle1);\n            TRtitle.appendChild(tdtitle2);\n            table.appendChild(TRtitle);\n            element.appendChild(table);\n\n            for (var i = 0; i < this.TrainIDTimeList.length; i++) {\n              const TRi = document.createElement('tr');\n              const tdID = document.createElement('td');\n              const tdTime = document.createElement('td');\n              const TextID = document.createTextNode(this.TrainIDTimeList[i].trainId);\n              console.log(this.TrainIDTimeList[i].trainId);\n              const TextTime = document.createTextNode(this.TrainIDTimeList[i].timeLeft);\n              tdID.style.border = '1px solid black';\n              tdTime.style.border = '1px solid black';\n              tdID.style.background = '#DFD1A2';\n              tdTime.style.background = '#DFD1A2';\n              tdID.style.width = '150px';\n              tdTime.style.width = '150px';\n              tdID.style.textAlign = 'center';\n              tdTime.style.textAlign = 'center';\n              tdID.appendChild(TextID);\n              tdTime.appendChild(TextTime);\n              TRi.appendChild(tdID);\n              TRi.appendChild(tdTime);\n              table.appendChild(TRi);\n              tdID.style.cursor = 'pointer';\n\n              if (i == this.Length - 1) {\n                var listitems = document.getElementsByTagName('td');\n                listitems[listitems.length - 1].style.borderBottomRightRadius = \"30px\";\n                listitems[listitems.length - 2].style.borderBottomLeftRadius = \"30px\";\n                const element2 = document.getElementById('row4');\n                element2.innerHTML = '';\n                const B2 = document.createElement('button');\n                B2.setAttribute('class', 'btn');\n                B2.style.background = '#eaca60';\n                B2.style.borderRadius = '25px';\n                B2.style.width = '150px';\n                B2.textContent = 'Selected Train Location';\n                B2.style.marginTop = '15px';\n                B2.setAttribute('id', 'b2');\n                B2.disabled = true;\n                element2.appendChild(B2);\n              }\n\n              tdID.addEventListener('mouseover', event => {\n                this.hoverin(event);\n              });\n              tdID.addEventListener('mouseout', event => {\n                this.hoverout(event);\n              });\n              tdID.addEventListener('click', event => {\n                this.ablebutton(event, Number(tdID.textContent));\n              });\n            }\n          }\n        }); // this.selectFlag=false;\n        // const element = <HTMLInputElement> document.getElementById('row3')\n        // element.innerHTML=''\n        // const e2 = <HTMLInputElement> document.getElementById('row4')\n        // e2.innerHTML=''\n        // const e3 = <HTMLInputElement> document.getElementById('map')\n        // e3.innerHTML=''\n        //   const table=document.createElement('table')\n        //   table.style.borderCollapse ='separate'\n        //   table.style.borderSpacing='6px'\n        //   const TRtitle=document.createElement('tr')  \n        //   const tdtitle1=document.createElement('td')\n        //   const tdtitle2=document.createElement('td')\n        //   tdtitle1.style.border='1px solid black'\n        //   tdtitle2.style.border='1px solid black'\n        //   tdtitle1.style.background='#DFD1A2'\n        //   tdtitle2.style.background='#DFD1A2'\n        //   tdtitle1.style.width='150px'\n        //   tdtitle2.style.width='150px'\n        //   tdtitle1.style.textAlign='center'\n        //   tdtitle2.style.textAlign='center'\n        //   tdtitle1.style.borderTopLeftRadius='30px'\n        //   tdtitle2.style.borderTopRightRadius='30px'\n        //   const tdtitleTEXT1=document.createTextNode('Train ID')\n        //   const tdtitleTEXT2=document.createTextNode('Remaining Time(hr)')\n        //   tdtitle1.appendChild(tdtitleTEXT1)\n        //   tdtitle2.appendChild(tdtitleTEXT2)\n        //   TRtitle.appendChild(tdtitle1)\n        //   TRtitle.appendChild(tdtitle2)\n        //   table.appendChild(TRtitle)\n        //   element.appendChild(table)\n        //   console.log(this.Length);\n        //   for( var i=0;i<this.Length;i++){\n        //         const TRi=document.createElement('tr')  \n        //         const tdID=document.createElement('td')\n        //         const tdTime=document.createElement('td')\n        //         const TextID=document.createTextNode(this.TrainIDTimeList[i].trainId)\n        //         console.log(this.TrainIDTimeList[i].trainId)\n        //         const TextTime=document.createTextNode(this.TrainIDTimeList[i].timeLeft)\n        //         tdID.style.border='1px solid black'\n        //         tdTime.style.border='1px solid black'\n        //         tdID.style.background='#DFD1A2'\n        //         tdTime.style.background='#DFD1A2'\n        //         tdID.style.width='150px'\n        //         tdTime.style.width='150px'\n        //         tdID.style.textAlign='center'\n        //         tdTime.style.textAlign='center'\n        //         tdID.appendChild(TextID)\n        //         tdTime.appendChild(TextTime)\n        //         TRi.appendChild(tdID)\n        //         TRi.appendChild(tdTime)\n        //         table.appendChild(TRi)\n        //         tdID.style.cursor='pointer'\n        //         if (i==this.Length-1){\n        //           var listitems=document.getElementsByTagName('td')\n        //               listitems[listitems.length-1].style.borderBottomRightRadius=\"30px\"\n        //               listitems[listitems.length-2].style.borderBottomLeftRadius=\"30px\"\n        //           const element2=<HTMLInputElement>document.getElementById('row4')\n        //           element2.innerHTML=''\n        //           const B2=document.createElement('button')\n        //           B2.setAttribute('class','btn')\n        //           B2.style.background='#eaca60'\n        //           B2.style.borderRadius='25px'\n        //           B2.style.width='150px'\n        //           B2.textContent='Selected Train Location'\n        //           B2.style.marginTop='15px'\n        //           B2.setAttribute('id','b2')\n        //           B2.disabled=true\n        //           element2.appendChild(B2)\n        //         }\n        //           tdID.addEventListener('mouseover',(event)=>{\n        //             this.hoverin(event)\n        //           })\n        //           tdID.addEventListener('mouseout',(event)=>{\n        //             this.hoverout(event)\n        //           })\n        //         tdID.addEventListener('click',(event)=>{\n        //           this.ablebutton(event,Number(tdID.textContent))\n        //         })\n        //   }\n      }\n    }\n\n    hoverin(event) {\n      var listitems = document.getElementsByTagName('td');\n\n      for (var i = 0; i < listitems.length; i++) {\n        if (this.x != listitems[i]) {\n          listitems[i].style.background = '#DFD1A2';\n        }\n      }\n\n      event.target.style.background = '#eaca60';\n    }\n\n    hoverout(event) {\n      var listitems = document.getElementsByTagName('td');\n\n      for (var i = 0; i < listitems.length; i++) {\n        if (this.x != listitems[i]) {\n          listitems[i].style.background = '#DFD1A2';\n        }\n      }\n    }\n\n    ablebutton(event, id) {\n      var listitems = document.getElementsByTagName('td');\n\n      for (var i = 0; i < listitems.length; i++) {\n        listitems[i].style.background = '#DFD1A2';\n      } //  if(this.x!=event.target){\n      //  const element2 = <HTMLInputElement> document.getElementById('map')\n      //   element2.innerHTML=''\n      // }\n\n\n      event.target.style.background = '#eaca60';\n      this.x = event.target;\n      var element = document.getElementById(\"b2\");\n      element.disabled = false;\n      element.textContent = 'Selected Train ' + id + ' Location';\n      element.addEventListener('click', () => {\n        this.trainInformation.GetTrianLocation2(id).subscribe(response => {\n          this.trainLocation = response;\n        }, error => {\n          console.log(error); //this.errorMessageID = error;\n        }, () => {\n          this.MapGoogleCode();\n        });\n      });\n    }\n\n    MapGoogleCode() {\n      const myLatlng = {\n        // lat: 27.180134\n        // , lng: 31.189283\n        lat: this.trainLocation.locationLat,\n        lng: this.trainLocation.locationLng\n      }; //const myLatlng = {lng: this.trainLocation.lng ,lat: this.trainLocation.lat};\n\n      let x = 13;\n      const map = new google.maps.Map(document.getElementById(\"map\"), {\n        zoom: 13,\n        center: myLatlng\n      });\n      const marker = new google.maps.Marker({\n        position: myLatlng,\n        map,\n        title: \"Click to zoom\"\n      });\n      map.addListener(\"center_changed\", () => {\n        // 3 seconds after the center of the map has changed, pan back to the\n        // marker.\n        window.setTimeout(() => {\n          map.panTo(marker.getPosition());\n        }, 3000);\n      });\n      marker.addListener(\"click\", () => {\n        map.zoom++;\n        map.setCenter(marker.getPosition()); //as google.maps.LatLng\n      });\n    }\n\n  }\n\n  CitytrainIDComponent.ɵfac = function CitytrainIDComponent_Factory(t) {\n    return new (t || CitytrainIDComponent)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.TrainService));\n  };\n\n  CitytrainIDComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CitytrainIDComponent,\n    selectors: [[\"app-citytrain-id\"]],\n    decls: 49,\n    vars: 3,\n    consts: [[1, \"row\", \"row1\"], [1, \"col-md-12\", \"d-flex\", \"justify-content-center\"], [\"name\", \"CityNameMenu\", \"id\", \"CityNameMenu\", \"aria-label\", \"Default select example\", 1, \"form-select\"], [\"selected\", \"\", \"disabled\", \"\"], [\"value\", \"CityName\", 4, \"ngFor\", \"ngForOf\"], [\"name\", \"CityNameMenu2\", \"id\", \"CityName2Menu\", \"aria-label\", \"Default select example\", 1, \"form-select\"], [1, \"row\", \"row2\"], [1, \"btn\", \"btn2\", 3, \"click\"], [1, \"row\", \"row2\", \"mt-2\"], [\"style\", \"color: red;font-size:18px;\", 4, \"ngIf\"], [1, \"row\", \"row3\"], [\"id\", \"row3\", 1, \"col-md-12\", \"d-flex\", \"justify-content-center\"], [\"id\", \"row4\", 1, \"col-md-12\", \"d-flex\", \"justify-content-center\"], [1, \"row\", \"row5\"], [\"id\", \"map\"], [\"id\", \"brr\"], [\"value\", \"CityName\"], [2, \"color\", \"red\", \"font-size\", \"18px\"]],\n    template: function CitytrainIDComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"app-headerafter\");\n        i0.ɵɵelement(1, \"br\");\n        i0.ɵɵelement(2, \"br\");\n        i0.ɵɵelement(3, \"br\");\n        i0.ɵɵelement(4, \"br\");\n        i0.ɵɵelement(5, \"br\");\n        i0.ɵɵelement(6, \"br\");\n        i0.ɵɵelement(7, \"br\");\n        i0.ɵɵelementStart(8, \"div\", 0);\n        i0.ɵɵelementStart(9, \"div\", 1);\n        i0.ɵɵelementStart(10, \"select\", 2);\n        i0.ɵɵelementStart(11, \"option\", 3);\n        i0.ɵɵtext(12, \" Your City:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(13, CitytrainIDComponent_option_13_Template, 2, 1, \"option\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(14, \"br\");\n        i0.ɵɵelementStart(15, \"div\", 0);\n        i0.ɵɵelementStart(16, \"div\", 1);\n        i0.ɵɵelementStart(17, \"select\", 5);\n        i0.ɵɵelementStart(18, \"option\", 3);\n        i0.ɵɵtext(19, \" Your Destination:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(20, CitytrainIDComponent_option_20_Template, 2, 1, \"option\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(21, \"br\");\n        i0.ɵɵelementStart(22, \"div\", 6);\n        i0.ɵɵelementStart(23, \"div\", 1);\n        i0.ɵɵelementStart(24, \"button\", 7);\n        i0.ɵɵlistener(\"click\", function CitytrainIDComponent_Template_button_click_24_listener() {\n          return ctx.GetTraininformation();\n        });\n        i0.ɵɵtext(25, \"Get TrainID\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"div\", 8);\n        i0.ɵɵelementStart(27, \"div\", 1);\n        i0.ɵɵtemplate(28, CitytrainIDComponent_p_28_Template, 2, 0, \"p\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(29, \"br\");\n        i0.ɵɵelement(30, \"br\");\n        i0.ɵɵelementStart(31, \"div\", 10);\n        i0.ɵɵelement(32, \"div\", 11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(33, \"div\", 6);\n        i0.ɵɵelement(34, \"div\", 12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(35, \"div\", 13);\n        i0.ɵɵelementStart(36, \"div\", 1);\n        i0.ɵɵelement(37, \"div\", 14);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(38, \"div\", 15);\n        i0.ɵɵelement(39, \"br\");\n        i0.ɵɵelement(40, \"br\");\n        i0.ɵɵelement(41, \"br\");\n        i0.ɵɵelement(42, \"br\");\n        i0.ɵɵelement(43, \"br\");\n        i0.ɵɵelement(44, \"br\");\n        i0.ɵɵelement(45, \"br\");\n        i0.ɵɵelement(46, \"br\");\n        i0.ɵɵelement(47, \"br\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(48, \"app-footerafter\");\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(13);\n        i0.ɵɵproperty(\"ngForOf\", ctx.StationList);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngForOf\", ctx.StationList);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngIf\", ctx.selectFlag);\n      }\n    },\n    directives: [i3.HeaderafterComponent, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i5.NgForOf, i5.NgIf, i6.FooterafterComponent],\n    styles: [\".btn2[_ngcontent-%COMP%]{background-color:#eaca60;border-radius:25px;width:150px;margin-top:10px}#CityNameMenu[_ngcontent-%COMP%], #CityName2Menu[_ngcontent-%COMP%]{width:320px;border-radius:20px}.row1[_ngcontent-%COMP%], .row2[_ngcontent-%COMP%], .row3[_ngcontent-%COMP%], .row5[_ngcontent-%COMP%]{top:40%;left:40%}.row5[_ngcontent-%COMP%]   #map[_ngcontent-%COMP%]{width:85%}#map[_ngcontent-%COMP%]{margin-top:22px;height:400px;width:600px}\"]\n  });\n  return CitytrainIDComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}